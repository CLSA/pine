<div class="utility-view rounded">
  <div class="container-fluid bg-primary rounded-top">
    <h4>{{ model.viewModel.record.name ? model.viewModel.record.name : 'Loading...' }}</h4>
  </div>
  <form name="form" novalidate>
    <div ng-if="!isComplete" class="loading spacer" uib-tooltip="Loading&hellip;"></div>
    <div ng-if="isComplete" class="spacer" id="Page{{ model.viewModel.record.rank }}">
      <div class="container-fluid vertical-spacer">
        <span class="text-info" ng-bind-html="model.viewModel.record.description | cnNewlines"></span>
        <div ng-repeat="question in model.renderModel.questionList">
          <div ng-if="'comment' == question.type"
               class="vertical-spacer text-info"
               ng-bind-html="question.description | cnNewlines">
          </div>
          <label ng-if="'comment' != question.type"
                 for="{{ question.id }}"
                 class="control-label"
                 ng-bind-html="question.description | cnNewlines"></label>
          <div ng-if="'comment' != question" ng-switch="question.type">
            <select ng-switch-when="boolean"
                    ng-attr-id="question{{ question.id }}"
                    class="form-control"
                    ng-model="answers[question.id]"
                    ng-options="item.value as item.name for item in question.enumList">
            </select>
            <select ng-switch-when="list"
                    ng-attr-id="question{{ question.id }}"
                    class="form-control"
                    ng-model="answers[question.id]"
                    ng-options="item.value as item.name for item in question.enumList">
            </select>
            <input ng-switch-when="number"
                   ng-attr-id="question{{ question.id }}"
                   class="form-control"
                   type="text"
                   ng-model="answers[question.id]"
                   autocomplete="off">
            </input>
            <input ng-switch-when="string"
                   ng-attr-id="question{{ question.id }}"
                   class="form-control"
                   type="text"
                   ng-model="answers[question.id]"
                   autocomplete="off">
            </input>
            <textarea ng-switch-when="text"
                      cn-elastic
                      ng-attr-id="question{{ question.id }}"
                      ng-model="answers[question.id]"
                      class="form-control">
            </textarea>
          </div>
        </div>
      </div>
    </div>
    <div class="form-footer text-right rounded-bottom bg-info">
      <div class="btn-group pull-left">
        <button ng-if="1 < model.viewModel.record.rank"
                type="button"
                ng-click="model.renderModel.back()"
                class="btn btn-primary">
          <i class="glyphicon glyphicon-chevron-left"></i> Back
        </button>
      </div>
      <div class="btn-group">
        <button ng-if="!model.viewModel.record.last_page"
                type="button"
                ng-click="model.renderModel.next()"
                class="btn btn-primary">
          Next <i class="glyphicon glyphicon-chevron-right"></i>
        </button>
      </div>
    </div>
  </form>
</div>
