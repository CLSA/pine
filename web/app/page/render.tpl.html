<cn-qnaire-navigator></cn-qnaire-navigator>
<div class="utility-view rounded">
  <div class="container-fluid bg-primary rounded-top">
    <h4>{{ model.viewModel.record.name ? model.viewModel.record.name : 'Loading...' }}</h4>
  </div>
  <form name="form" novalidate>
    <div ng-if="!isComplete" class="loading spacer" uib-tooltip="Loading&hellip;"></div>
    <div ng-if="isComplete" class="spacer" id="Page{{ model.viewModel.record.rank }}">
      <div class="container-fluid vertical-spacer">
        <span class="text-info" ng-bind-html="model.viewModel.record.description | cnNewlines"></span>
        <div ng-repeat="question in model.renderModel.questionList">
          <div ng-if="'comment' == question.type"
               class="vertical-spacer text-info"
               ng-bind-html="question.description | cnNewlines">
          </div>
          <label ng-if="'comment' != question.type"
                 for="{{ question.id }}"
                 class="control-label"
                 ng-bind-html="question.description | cnNewlines"></label>
          <div class="horizontal-spacer" ng-if="'comment' != question" ng-switch="question.type">
            <div ng-switch-when="boolean">
              <label class="btn btn-default full-width"
                     ng-model="model.renderModel.data[question.id].yes"
                     ng-click="model.renderModel.setAnswer( question, true )"
                     uib-btn-checkbox>
                <i class="glyphicon"
                   ng-class="model.renderModel.data[question.id].yes ? 'glyphicon-check' : 'glyphicon-unchecked'"></i>
                <em>Yes</em>
              </label>
              <label class="btn btn-default full-width"
                     ng-model="model.renderModel.data[question.id].no"
                     ng-click="model.renderModel.setAnswer( question, false )"
                     uib-btn-checkbox>
                <i class="glyphicon"
                   ng-class="model.renderModel.data[question.id].no ? 'glyphicon-check' : 'glyphicon-unchecked'"></i>
                <em>No</em>
              </label>
            </div>
            <div ng-switch-when="list" ng-repeat="option in question.optionList">
              <label class="btn btn-default full-width"
                     ng-model="model.renderModel.data[question.id][option.id]"
                     ng-style="{ 'font-style': option.exclusive ? 'italic' : 'normal' }"
                     ng-click="model.renderModel.setAnswer( question, option )"
                     uib-btn-checkbox>
                <i class="glyphicon"
                   ng-class="model.renderModel.data[question.id][option.id] ? 'glyphicon-check' : 'glyphicon-unchecked'"></i>
                {{ option.name }}
              </label>
            </div>
            <input ng-switch-when="number"
                   ng-attr-id="question{{ question.id }}"
                   class="form-control"
                   type="text"
                   ng-model="answers[question.id]"
                   autocomplete="off">
            </input>
            <input ng-switch-when="string"
                   ng-attr-id="question{{ question.id }}"
                   class="form-control"
                   type="text"
                   ng-model="answers[question.id]"
                   autocomplete="off">
            </input>
            <textarea ng-switch-when="text"
                      cn-elastic
                      ng-attr-id="question{{ question.id }}"
                      ng-model="answers[question.id]"
                      class="form-control">
            </textarea>
            <div class="btn-group full-width">
              <label class="btn btn-default col-xs-6"
                     ng-model="model.renderModel.data[question.id].dkna"
                     ng-click="model.renderModel.setAnswer( question, 'dkna' )"
                     uib-btn-checkbox>
                <i class="glyphicon"
                   ng-class="model.renderModel.data[question.id].dkna ? 'glyphicon-check' : 'glyphicon-unchecked'"></i>
                <em>Don't Know / No Answer</em>
              </label>
              <label class="btn btn-default col-xs-6"
                     ng-model="model.renderModel.data[question.id].refuse"
                     ng-click="model.renderModel.setAnswer( question, 'refuse' )"
                     uib-btn-checkbox>
                <i class="glyphicon"
                   ng-class="model.renderModel.data[question.id].refuse ? 'glyphicon-check' : 'glyphicon-unchecked'"></i>
                <em>Refuse</em>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="form-footer text-right rounded-bottom bg-info">
      <div class="btn-group pull-left">
        <button type="button"
                ng-click="model.renderModel.renderPreviousPage()"
                class="btn btn-info">
          <i class="glyphicon glyphicon-chevron-left"></i>
        </button>
        <button type="button"
                ng-click="model.renderModel.renderNextPage()"
                class="btn btn-info">
          <i class="glyphicon glyphicon-chevron-right"></i>
        </button>
      </div>
      <div class="btn-group">
        <button type="button"
                ng-click="model.renderModel.viewPage()"
                class="btn btn-default">
          View Page
        </button>
      </div>
    </div>
  </form>
</div>
